{"version":3,"file":"index.umd.js","sources":["../src/wallets/metamask/setup.ts","../src/wallets/metamask/setup/isNewerVersion.ts","../src/wallets/metamask/setup/downloader.ts","../src/wallets/wallet.ts","../src/helpers/actions.ts","../src/helpers/selectors.ts","../src/wallets/metamask/actions/helpers/actions.ts","../src/wallets/metamask/actions/helpers/selectors.ts","../src/wallets/metamask/actions/util.ts","../src/wallets/metamask/actions/switchAccount.ts","../src/wallets/metamask/setup/setupActions.ts","../src/wallets/coinbase/actions.ts","../src/wallets/coinbase/coinbase.ts","../src/wallets/metamask/metamask.ts","../src/wallets/metamask/actions/addNetwork.ts","../src/wallets/metamask/actions/addToken.ts","../src/wallets/metamask/actions/approve.ts","../src/wallets/metamask/actions/createAccount.ts","../src/wallets/metamask/actions/allowNetworkSwitch.ts","../src/wallets/metamask/actions/confirmTransaction.ts","../src/wallets/metamask/actions/deleteAccount.ts","../src/wallets/metamask/actions/deleteNetwork.ts","../src/wallets/metamask/actions/getTokenBalance.ts","../src/wallets/metamask/actions/hasNetwork.ts","../src/wallets/metamask/actions/importPk.ts","../src/wallets/metamask/actions/lock.ts","../src/wallets/metamask/actions/sign.ts","../src/wallets/metamask/actions/switchNetwork.ts","../src/wallets/metamask/actions/unlock.ts","../src/wallets/wallets.ts","../src/launch.ts","../src/bootstrap.ts"],"sourcesContent":["import { Page } from 'playwright-core';\nimport { Step, WalletOptions } from '../wallets';\n\n/**\n * Setup MetaMask with base account\n * */\n\nexport const setup =\n  (page: Page, defaultMetamaskSteps: Step<WalletOptions>[]) =>\n  async <Options = WalletOptions>(options?: Options, steps: Step<Options>[] = defaultMetamaskSteps): Promise<void> => {\n    // goes through the installation steps required by metamask\n    for (const step of steps) {\n      await step(page, options);\n    }\n  };\n","export const isNewerVersion = (current: string, comparingWith: string): boolean => {\n  if (current === comparingWith) return false;\n\n  const currentFragments = current.replace(/[^\\d.-]/g, '').split('.');\n  const comparingWithFragments = comparingWith.replace(/[^\\d.-]/g, '').split('.');\n\n  const length =\n    currentFragments.length > comparingWithFragments.length ? currentFragments.length : comparingWithFragments.length;\n  for (let i = 0; i < length; i++) {\n    if ((Number(currentFragments[i]) || 0) === (Number(comparingWithFragments[i]) || 0)) continue;\n    return (Number(comparingWithFragments[i]) || 0) > (Number(currentFragments[i]) || 0);\n  }\n  return true;\n};\n","import * as fs from 'fs';\nimport { IncomingMessage } from 'http';\nimport { get } from 'https';\nimport * as os from 'os';\nimport * as path from 'path';\n\nimport StreamZip from 'node-stream-zip';\nimport { OfficialOptions } from '../../../types';\nimport { WalletIdOptions } from '../../wallets';\nimport { isNewerVersion } from './isNewerVersion';\n\nexport const EXTENSION_ID = 'gadekpdjmpjjnnemgnhkbjgnjpdaakgh';\nexport const EXTENSION_PUB_KEY =\n  'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnpiOcYGaEp02v5On5luCk/4g9j+ujgWeGlpZVibaSz6kUlyiZvcVNIIUXR568uv5NrEi5+j9+HbzshLALhCn9S43E7Ha6Xkdxs3kOEPBu8FRNwFh2S7ivVr6ixnl2FCGwfkP1S1r7k665eC1/xYdJKGCc8UByfSw24Rtl5odUqZX1SaE6CsQEMymCFcWhpE3fV+LZ6RWWJ63Zm1ac5KmKzXdj7wZzN3onI0Csc8riBZ0AujkThJmCR8tZt2PkVUDX9exa0XkJb79pe0Ken5Bt2jylJhmQB7R3N1pVNhNQt17Sytnwz6zG2YsB2XNd/1VYJe52cPNJc7zvhQJpHjh5QIDAQAB';\n\nexport type Path =\n  | string\n  | {\n      download: string;\n      extract: string;\n    };\n\nconst isEmpty = (path): boolean => {\n  const items = fs.readdirSync(path, { withFileTypes: true });\n  const files = items.filter((item) => item.isFile() && !item.name.startsWith('.'));\n  return files.length === 0;\n};\n\nexport default (walletId: WalletIdOptions, releasesUrl: string, recommendedVersion: string) =>\n  async (options: OfficialOptions): Promise<string> => {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let EXTENSION_PATH;\n\n    const { version } = options;\n\n    if (version) {\n      /* eslint-disable no-console */\n      console.log(''); // new line\n      if (version === 'latest')\n        console.warn(\n          '\\x1b[33m%s\\x1b[0m',\n          `It is not recommended to run ${walletId} with \"latest\" version. Use it at your own risk or set to the recommended version \"${recommendedVersion}\".`,\n        );\n      else if (isNewerVersion(recommendedVersion, version))\n        console.warn(\n          '\\x1b[33m%s\\x1b[0m',\n          `Seems you are running a newer version (${version}) of ${walletId} than recommended by the Dappwright team.\n      Use it at your own risk or set to the recommended version \"${recommendedVersion}\".`,\n        );\n      else if (isNewerVersion(version, recommendedVersion))\n        console.warn(\n          '\\x1b[33m%s\\x1b[0m',\n          `Seems you are running an older version (${version}) of ${walletId} than recommended by the Dappwright team.\n      Use it at your own risk or set the recommended version \"${recommendedVersion}\".`,\n        );\n      else console.log(`Running tests on ${walletId} version ${version}`);\n\n      console.log(''); // new line\n\n      EXTENSION_PATH = await download(version, releasesUrl, downloadDir(walletId));\n    } else {\n      console.log(`Running tests on local ${walletId} build`);\n    }\n\n    return EXTENSION_PATH;\n  };\n\nexport const downloadDir = (walletId: WalletIdOptions): string => {\n  return path.resolve(os.tmpdir(), 'dappwright', walletId);\n};\n\nconst download = async (version: string, releasesUrl: string, location: string): Promise<string> => {\n  const extractDestination = path.resolve(location, version.replace(/\\./g, '_'));\n\n  if (version !== 'latest') {\n    if (fs.existsSync(extractDestination) && !isEmpty(extractDestination)) return extractDestination;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log('Downloading extension...');\n\n  const { filename, downloadUrl } = await getGithubRelease(releasesUrl, `v${version}`);\n\n  // Clean if system tmp files are cleaned but dir structure can persist\n  if (fs.existsSync(extractDestination) && isEmpty(extractDestination)) {\n    fs.rmdirSync(extractDestination, { recursive: true });\n  }\n\n  if (!fs.existsSync(extractDestination) || isEmpty(extractDestination)) {\n    const downloadedFile = await downloadGithubRelease(filename, downloadUrl, location);\n    const zip = new StreamZip.async({ file: downloadedFile });\n    fs.mkdirSync(extractDestination);\n    await zip.extract(null, extractDestination);\n\n    // Set the chrome extension to value of EXTENSION_ID\n    const manifestPath = path.resolve(extractDestination, 'manifest.json');\n    const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf-8'));\n    manifest.key = EXTENSION_PUB_KEY;\n    fs.writeFileSync(manifestPath, JSON.stringify(manifest));\n  }\n  return extractDestination;\n};\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst request = (url: string): Promise<IncomingMessage> =>\n  new Promise((resolve) => {\n    const request = get(url, (response) => {\n      if (response.statusCode == 302) {\n        const redirectRequest = get(response.headers.location, resolve);\n        redirectRequest.on('error', (error) => {\n          // eslint-disable-next-line no-console\n          console.warn('request redirected error:', error.message);\n          throw error;\n        });\n      } else {\n        resolve(response);\n      }\n    });\n    request.on('error', (error) => {\n      // eslint-disable-next-line no-console\n      console.warn('request error:', error.message);\n      throw error;\n    });\n  });\n\nconst downloadGithubRelease = (name: string, url: string, location: string): Promise<string> =>\n  // eslint-disable-next-line no-async-promise-executor\n  new Promise(async (resolve) => {\n    if (!fs.existsSync(location)) {\n      fs.mkdirSync(location, { recursive: true });\n    }\n    const fileLocation = path.join(location, name);\n    const file = fs.createWriteStream(fileLocation);\n    const stream = await request(url);\n    stream.pipe(file);\n    stream.on('end', () => {\n      resolve(fileLocation);\n    });\n  });\n\ntype GithubRelease = { downloadUrl: string; filename: string; tag: string };\nconst getGithubRelease = (releasesUrl: string, version: string): Promise<GithubRelease> =>\n  new Promise((resolve, reject) => {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const options = { headers: { 'User-Agent': 'Mozilla/5.0' } };\n    if (process.env.GITHUB_TOKEN) options.headers['Authorization'] = `Bearer ${process.env.GITHUB_TOKEN}`;\n    const request = get(releasesUrl, options, (response) => {\n      let body = '';\n      response.on('data', (chunk) => {\n        body += chunk;\n      });\n\n      response.on('end', () => {\n        const data = JSON.parse(body);\n        if (data.message) return reject(data.message);\n        for (const result of data) {\n          if (result.draft) continue;\n          if (version === 'latest' || result.name.includes(version) || result.tag_name.includes(version)) {\n            for (const asset of result.assets) {\n              if (asset.name.includes('chrome'))\n                resolve({\n                  downloadUrl: asset.browser_download_url,\n                  filename: asset.name,\n                  tag: result.tag_name,\n                });\n            }\n          }\n        }\n        reject(`Version ${version} not found!`);\n      });\n    });\n    request.on('error', (error) => {\n      // eslint-disable-next-line no-console\n      console.warn('getGithubRelease error:', error.message);\n      throw error;\n    });\n  });\n","import { Page } from 'playwright-core';\nimport { AddNetwork, AddToken, Dappwright, OfficialOptions, TransactionOptions } from '../types';\nimport { Step, WalletIdOptions, WalletOptions } from './wallets';\n\nexport default abstract class Wallet implements Dappwright {\n  version: string;\n  page: Page;\n\n  constructor(page: Page) {\n    this.page = page;\n  }\n\n  // Name of the wallet\n  static id: WalletIdOptions;\n  static recommendedVersion: string;\n  static releasesUrl: string;\n  static homePath: string;\n\n  // Extension downloader\n  static download: (options: OfficialOptions) => Promise<string>;\n\n  // Setup\n  abstract setup: (options?: WalletOptions, steps?: Step<WalletOptions>[]) => Promise<void>;\n  abstract defaultSetupSteps: Step<WalletOptions>[];\n\n  // Wallet actions\n  abstract addNetwork: (options: AddNetwork) => Promise<void>;\n  abstract addToken: (options: AddToken) => Promise<void>;\n  abstract approve: () => Promise<void>;\n  abstract createAccount: () => Promise<void>;\n  abstract confirmNetworkSwitch: () => Promise<void>;\n  abstract confirmTransaction: (options?: TransactionOptions) => Promise<void>;\n  abstract deleteAccount: (accountNumber: number) => Promise<void>;\n  abstract deleteNetwork: (name: string) => Promise<void>;\n  abstract getTokenBalance: (tokenSymbol: string) => Promise<number>;\n  abstract hasNetwork: (name: string) => Promise<boolean>;\n  abstract importPK: (pk: string) => Promise<void>;\n  abstract lock: () => Promise<void>;\n  abstract sign: () => Promise<void>;\n  abstract switchAccount: (accountNumber: number) => Promise<void>;\n  abstract switchNetwork: (network: string) => Promise<void>;\n  abstract unlock: (password?: string) => Promise<void>;\n}\n","import { Page } from 'playwright-core';\nimport { getElementByContent, getInputByLabel } from '.';\n\nexport const waitForChromeState = async (page: Page): Promise<void> => {\n  await page.waitForTimeout(3000);\n};\n\nexport const clickOnElement = async (page: Page, text: string, type?: string): Promise<void> => {\n  const element = await getElementByContent(page, text, type);\n  await element.click();\n};\n\nexport const clickOnButton = async (page: Page, text: string): Promise<void> => {\n  const button = await getElementByContent(page, text, 'button');\n  await button.click();\n};\n\n/**\n *\n * @param page\n * @param label\n * @param text\n * @param clear\n * @param excludeSpan\n * @param optional\n * @returns true if found and updated, false otherwise\n */\nexport const typeOnInputField = async (\n  page: Page,\n  label: string,\n  text: string,\n  clear = false,\n  excludeSpan = false,\n  optional = false,\n): Promise<boolean> => {\n  let input;\n  try {\n    input = await getInputByLabel(page, label, excludeSpan, 5000);\n  } catch (e) {\n    if (optional) return false;\n    throw e;\n  }\n\n  if (clear)\n    await page.evaluate((node) => {\n      node.value = '';\n    }, input);\n  await input.type(text);\n  return true;\n};\n","import { ElementHandle, Page } from 'playwright-core';\n\nexport const getElementByContent = (page: Page, text: string, type = '*'): Promise<ElementHandle | null> =>\n  page.waitForSelector(`//${type}[contains(text(), '${text}')]`);\n\nexport const getInputByLabel = (\n  page: Page,\n  text: string,\n  excludeSpan = false,\n  timeout = 2000,\n): Promise<ElementHandle> =>\n  page.waitForSelector(\n    [\n      `//label[contains(.,'${text}')]/following-sibling::textarea`,\n      `//label[contains(.,'${text}')]/following-sibling::*//input`,\n      `//h6[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::input`,\n      `//h6[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::*//input`,\n      ...(!excludeSpan\n        ? [\n            `//span[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::*//input`,\n            `//span[contains(.,'${text}')]/following-sibling::*//input`,\n          ]\n        : []),\n    ].join('|'),\n    { timeout },\n  );\n\nexport const getInputByLabelSelector = (text: string, excludeSpan = false): string =>\n  [\n    `//label[contains(.,'${text}')]/following-sibling::textarea`,\n    `//label[contains(.,'${text}')]/following-sibling::*//input`,\n    `//h6[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::input`,\n    `//h6[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::*//input`,\n    ...(!excludeSpan\n      ? [\n          `//span[contains(.,'${text}')]/parent::node()/parent::node()/following-sibling::*//input`,\n          `//span[contains(.,'${text}')]/following-sibling::*//input`,\n        ]\n      : []),\n  ].join('|');\n","import { Page } from 'playwright-core';\nimport { getAccountMenuButton, getSettingsSwitch } from '.';\n\nexport const clickOnSettingsSwitch = async (page: Page, text: string): Promise<void> => {\n  const button = await getSettingsSwitch(page, text);\n  await button.click();\n};\n\nexport const openNetworkDropdown = async (page: Page): Promise<void> => {\n  const networkSwitcher = await page.waitForSelector('.network-display');\n  await networkSwitcher.click();\n  await page.waitForSelector('li.dropdown-menu-item');\n};\n\nexport const openProfileDropdown = async (page: Page): Promise<void> => {\n  const accountSwitcher = await page.waitForSelector('.account-menu__icon');\n  await accountSwitcher.click({ noWaitAfter: true, force: true });\n};\n\nexport const openAccountDropdown = async (page: Page): Promise<void> => {\n  const accMenu = await getAccountMenuButton(page);\n  await accMenu.click();\n  await page.waitForSelector('.menu__container.account-options-menu');\n};\n\nexport const clickOnLogo = async (page: Page): Promise<void> => {\n  const header = await page.waitForSelector('.app-header__logo-container');\n  await header.click();\n};\n","import { ElementHandle, Page } from 'playwright-core';\n\nexport const getSettingsSwitch = (page: Page, text: string): Promise<ElementHandle | null> =>\n  page.waitForSelector(\n    [\n      `//span[contains(.,'${text}')]/parent::div/following-sibling::div/div/div/div`,\n      `//span[contains(.,'${text}')]/parent::div/following-sibling::div/div/label/div`,\n    ].join('|'),\n  );\n\nexport const getErrorMessage = async (page: Page): Promise<string | false> => {\n  const options: Parameters<Page['waitForSelector']>[1] = { timeout: 1000 };\n\n  const errorElement = await Promise.race([\n    page.waitForSelector(`span.error`, options),\n    page.waitForSelector(`.typography--color-error-1`, options),\n    page.waitForSelector(`.typography--color-error-default`, options),\n    page.waitForSelector(`.form-field__input--error`, options),\n  ]).catch(() => null);\n  if (!errorElement) return false;\n  return (errorElement as HTMLElement).innerText;\n};\n\nexport const getAccountMenuButton = (page: Page): Promise<ElementHandle | null> =>\n  page.waitForSelector(`button.menu-bar__account-options`);\n","import { Page } from 'playwright-core';\n\nexport const performPopupAction = async (page: Page, action: (popup: Page) => Promise<void>): Promise<void> => {\n  const popup = await page.context().waitForEvent('page'); // Wait for the popup to show up\n\n  await action(popup);\n  if (!popup.isClosed()) await popup.waitForEvent('close');\n};\n","import { Page } from 'playwright-core';\nimport { clickOnElement } from '../../../helpers';\nimport { openProfileDropdown } from './helpers';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const switchAccount =\n  (page: Page) =>\n  async (accountNumber: number): Promise<void> => {\n    await page.bringToFront();\n    await page.waitForTimeout(500); // TODO: waiting for other states didn't work\n    await openProfileDropdown(page);\n\n    // TODO: use different approach? maybe change param to account name\n    await clickOnElement(page, `Account ${accountNumber}`);\n  };\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton, clickOnElement, typeOnInputField, waitForChromeState } from '../../../helpers';\nimport { WalletOptions } from '../../wallets';\nimport { clickOnLogo, clickOnSettingsSwitch, openNetworkDropdown } from '../actions/helpers';\n\nexport async function showTestNets(metamaskPage: Page): Promise<void> {\n  await openNetworkDropdown(metamaskPage);\n\n  await clickOnElement(metamaskPage, 'Show/hide');\n  await clickOnSettingsSwitch(metamaskPage, 'Advanced gas controls');\n  await clickOnSettingsSwitch(metamaskPage, 'Show test networks');\n  await clickOnLogo(metamaskPage);\n  await waitForChromeState(metamaskPage);\n}\n\nexport async function importWallet(metamaskPage: Page): Promise<void> {\n  await metamaskPage.getByTestId('onboarding-import-wallet').click();\n  await metamaskPage.getByTestId('import-srp-confirm').click();\n  await metamaskPage.getByTestId('create-password-new').fill('sdfsdf');\n  await metamaskPage.getByTestId('create-password-confirm').click();\n  await metamaskPage.getByTestId('create-password-confirm').fill('sdfsdfs');\n  await metamaskPage.getByTestId('create-password-new').dblclick();\n  await metamaskPage.getByTestId('create-password-new').fill('10keylabs');\n  await metamaskPage.getByTestId('create-password-new').press('Tab');\n  await metamaskPage.getByTestId('create-password-confirm').fill('10keylabs');\n  await metamaskPage.getByTestId('create-password-import').click();\n  await metamaskPage.getByTestId('onboarding-complete-done').click();\n  await metamaskPage.getByTestId('pin-extension-next').click();\n  await metamaskPage.getByTestId('pin-extension-done').click();\n}\n\nexport async function noThanksTelemetry(metamaskPage: Page): Promise<void> {\n  await clickOnButton(metamaskPage, 'No thanks');\n}\n\nexport async function importAccount(\n  metamaskPage: Page,\n  { seed = 'already turtle birth enroll since owner keep patch skirt drift any dinner' }: WalletOptions,\n): Promise<void> {\n  await metamaskPage.getByTestId('onboarding-import-wallet').click();\n  await metamaskPage.getByTestId('metametrics-i-agree').click();\n\n  for (const [index, seedPart] of seed.split(' ').entries())\n    await typeOnInputField(metamaskPage, `${index + 1}.`, seedPart);\n\n  await metamaskPage.getByTestId('import-srp-confirm').click();\n}\n\nexport async function createPassword(metamaskPage: Page, { password = 'password1234' }: WalletOptions): Promise<void> {\n  await metamaskPage.getByTestId('create-password-new').fill(password);\n  await metamaskPage.getByTestId('create-password-confirm').fill(password);\n  await metamaskPage.getByTestId('create-password-terms').click();\n  await metamaskPage.getByTestId('create-password-import').click();\n}\n\nexport async function clearOnboardingHelp(metamaskPage: Page): Promise<void> {\n  await metamaskPage.getByTestId('onboarding-complete-done').click();\n  await metamaskPage.getByTestId('pin-extension-next').click();\n  await metamaskPage.getByTestId('pin-extension-done').click();\n}\n\nexport const closePopup = async (page: Page): Promise<void> => {\n  /* For some reason popup deletes close button and then create new one (react stuff)\n   * hacky solution can be found here => https://github.com/puppeteer/puppeteer/issues/3496 */\n  await new Promise((resolve) => setTimeout(resolve, 1000));\n  if (await page.locator('.popover-header__button').isVisible()) {\n    await page.$eval('.popover-header__button', (node: HTMLElement) => node.click());\n  }\n};\n","import { ElementHandle, Page } from 'playwright-core';\nimport { AddNetwork, AddToken } from '../..';\nimport { waitForChromeState } from '../../helpers';\nimport { performPopupAction } from '../metamask/actions';\nimport { WalletOptions } from '../wallets';\n\nconst goHome = async (page: Page): Promise<void> => {\n  await page.getByTestId('portfolio-navigation-link').click();\n};\n\nexport const navigateHome = async (page: Page): Promise<void> => {\n  await page.goto(page.url().split('?')[0]);\n};\n\nexport async function getStarted(\n  page: Page,\n  {\n    seed = 'already turtle birth enroll since owner keep patch skirt drift any dinner',\n    password = 'password1234!!!!',\n  }: WalletOptions,\n): Promise<void> {\n  // Welcome screen\n  await page.getByTestId('btn-import-existing-wallet').click();\n\n  // Import Wallet\n  await page.getByTestId('btn-import-recovery-phrase').click();\n  await page.getByTestId('seed-phrase-input').fill(seed);\n  await page.getByTestId('btn-import-wallet').click();\n  await page.getByTestId('setPassword').fill(password);\n  await page.getByTestId('setPasswordVerify').fill(password);\n  await page.getByTestId('terms-and-privacy-policy').check();\n  await page.getByTestId('btn-password-continue').click();\n\n  // Allow extension state/settings to settle\n  await waitForChromeState(page);\n}\n\nexport const approve = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup: Page) => {\n    await popup.getByTestId('allow-authorize-button').click();\n  });\n};\n\nexport const sign = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup: Page) => {\n    await popup.getByTestId('sign-message').click();\n  });\n};\n\nexport const lock = (page: Page) => async (): Promise<void> => {\n  await page.getByTestId('settings-navigation-link').click();\n  await page.getByTestId('lock-wallet-button').click();\n};\n\nexport const unlock =\n  (page: Page) =>\n  async (password = 'password1234!!!!'): Promise<void> => {\n    await page.getByTestId('unlock-with-password').fill(password);\n    await page.getByTestId('unlock-wallet-button').click();\n\n    // Go back home since wallet returns to last visited page when unlocked.\n    await goHome(page);\n\n    // Wait for homescreen data to load\n    await page.waitForSelector(\"//div[@data-testid='asset-list']//*[not(text='')]\", { timeout: 10000 });\n  };\n\nexport const confirmTransaction = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup: Page): Promise<void> => {\n    try {\n      // Help prompt appears once\n      await (await popup.waitForSelector(\"text='Got it'\", { timeout: 1000 })).click();\n    } catch {\n      // Ignore missing help prompt\n    }\n\n    await popup.getByTestId('request-confirm-button').click();\n  });\n};\n\nexport const addNetwork =\n  (page: Page) =>\n  async (options: AddNetwork): Promise<void> => {\n    // Add network flow closes current screen and opens another, direct access is cleaner for now\n    const settingsPage = await page.context().newPage();\n    await settingsPage.goto(`${page.url()}?internalPopUpRequest=true&action=addCustomNetwork`);\n    await settingsPage.getByTestId('custom-network-name-input').fill(options.networkName);\n    await settingsPage.getByTestId('custom-network-rpc-url-input').fill(options.rpc);\n    await settingsPage.getByTestId('custom-network-chain-id-input').fill(options.chainId.toString());\n    await settingsPage.getByTestId('custom-network-currency-symbol-input').fill(options.symbol);\n    await settingsPage.getByTestId('custom-network-save').click();\n\n    // Check for error messages\n    let errorNode;\n    try {\n      errorNode = await settingsPage.waitForSelector('//span[@data-testid=\"text-input-error-label\"]', {\n        timeout: 50,\n      });\n    } catch {\n      // No errors found\n    }\n\n    if (errorNode) {\n      const errorMessage = await errorNode.textContent();\n      await settingsPage.close();\n      throw new SyntaxError(errorMessage);\n    }\n\n    await settingsPage.waitForEvent('close');\n\n    // New network isn't reflected until page is reloaded\n    await page.bringToFront();\n    await page.reload();\n  };\n\nexport const deleteNetwork =\n  (page: Page) =>\n  async (name: string): Promise<void> => {\n    await page.getByTestId('settings-navigation-link').click();\n    await page.getByTestId('settings-networks-menu-cell-pressable').click();\n\n    // Search for network then click on the first result\n    await page.getByTestId('network-list-search').fill(name);\n    await (await page.waitForSelector('//div[@data-testid=\"list-\"][1]//button')).click();\n\n    await page.getByTestId('custom-network-delete').click();\n    await goHome(page);\n  };\n\nexport const hasNetwork =\n  (page: Page) =>\n  async (name: string): Promise<boolean> => {\n    await page.getByTestId('settings-navigation-link').click();\n    await page.getByTestId('settings-networks-menu-cell-pressable').click();\n    await page.getByTestId('network-list-search').fill(name);\n    const networkIsListed = await page.isVisible('//div[@data-testid=\"list-\"][1]//button');\n    await goHome(page);\n    return networkIsListed;\n  };\n\nexport const getTokenBalance =\n  (page: Page) =>\n  async (tokenSymbol: string): Promise<number> => {\n    const readFromCryptoTab = async (): Promise<ElementHandle<SVGElement | HTMLElement>> => {\n      await page.bringToFront();\n      await page.getByTestId('portfolio-selector-nav-tabLabel--crypto').click();\n      return await page.waitForSelector(\n        `//button[contains(@data-testid, \"asset-item\")][contains(@data-testid, \"${tokenSymbol}\")]`,\n        {\n          timeout: 500,\n        },\n      );\n    };\n\n    const readFromTestnetTab = async (): Promise<ElementHandle<SVGElement | HTMLElement>> => {\n      await page.getByTestId('portfolio-selector-nav-tabLabel--testnet').click();\n      return await page.waitForSelector(\n        `//button[contains(@data-testid, \"asset-item\")][contains(@data-testid, \"${tokenSymbol}\")]`,\n        {\n          timeout: 500,\n        },\n      );\n    };\n\n    const readAttempts = [readFromCryptoTab, readFromTestnetTab];\n\n    let button: ElementHandle<SVGElement | HTMLElement>;\n    for (const readAttempt of readAttempts) {\n      try {\n        button = await readAttempt();\n      } catch {\n        // Failed to read token value\n      }\n    }\n\n    if (!button) return 0;\n\n    const text = await button.textContent();\n    const currencyAmount = text.replaceAll(/ |,/g, '').split(tokenSymbol)[2];\n\n    return currencyAmount ? Number(currencyAmount) : 0;\n  };\n\nexport const createAccount = (page: Page) => async (): Promise<void> => {\n  await page.getByTestId('portfolio-header--switcher-cell-pressable').click();\n  await page.getByTestId('wallet-switcher--manage').click();\n  await page.getByTestId('manage-wallets-account-item--action-cell-pressable').click();\n\n  // Help prompt appears once\n  try {\n    await page.getByTestId('add-new-wallet--continue').click();\n  } catch {\n    // Ignore missing help prompt\n  }\n\n  await waitForChromeState(page);\n};\n\nexport const switchAccount =\n  (page: Page) =>\n  async (i: number): Promise<void> => {\n    await page.getByTestId('portfolio-header--switcher-cell-pressable').click();\n    await (\n      await page.waitForSelector(`(//button[@data-testid=\"wallet-switcher--wallet-item-cell-pressable\"])[${i}]`)\n    ).click();\n  };\n\n//\n// Unimplemented actions\n//\n\nexport const deleteAccount = async (_i: number): Promise<void> => {\n  // eslint-disable-next-line no-console\n  console.warn('deleteAccount not implemented - Coinbase does not support importing/removing additional private keys');\n};\n\nexport const addToken = async (_: AddToken): Promise<void> => {\n  // eslint-disable-next-line no-console\n  console.warn('addToken not implemented - Coinbase does not support adding custom tokens');\n};\n\nexport const importPK = async (_: string): Promise<void> => {\n  // eslint-disable-next-line no-console\n  console.warn('importPK not implemented - Coinbase does not support importing/removing private keys');\n};\n\nexport const switchNetwork = async (_: string): Promise<void> => {\n  // eslint-disable-next-line no-console\n  console.warn('switchNetwork not implemented');\n};\n\n// TODO: Cannot implement until verified coinbase wallet bug is fixed.\nexport const confirmNetworkSwitch = async (): Promise<void> => {\n  // eslint-disable-next-line no-console\n  console.warn('confirmNetorkSwitch not implemented');\n};\n","import { setup } from '../metamask/setup';\nimport downloader from '../metamask/setup/downloader';\nimport Wallet from '../wallet';\nimport { Step, WalletIdOptions, WalletOptions } from '../wallets';\nimport {\n  addNetwork,\n  addToken,\n  approve,\n  confirmNetworkSwitch,\n  confirmTransaction,\n  createAccount,\n  deleteAccount,\n  deleteNetwork,\n  getStarted,\n  getTokenBalance,\n  hasNetwork,\n  importPK,\n  lock,\n  navigateHome,\n  sign,\n  switchAccount,\n  switchNetwork,\n  unlock,\n} from './actions';\n\nexport class CoinbaseWallet extends Wallet {\n  static id = 'coinbase' as WalletIdOptions;\n  static recommendedVersion = '3.6.0';\n  static releasesUrl = 'https://api.github.com/repos/TenKeyLabs/coinbase-wallet-archive/releases';\n  static homePath = '/index.html';\n\n  options: WalletOptions;\n\n  // Extension Downloader\n  static download = downloader(this.id, this.releasesUrl, this.recommendedVersion);\n\n  // Setup\n  defaultSetupSteps: Step<WalletOptions>[] = [getStarted, navigateHome];\n  setup = setup(this.page, this.defaultSetupSteps);\n\n  // Actions\n  addNetwork = addNetwork(this.page);\n  addToken = addToken;\n  approve = approve(this.page);\n  createAccount = createAccount(this.page);\n  confirmNetworkSwitch = confirmNetworkSwitch;\n  confirmTransaction = confirmTransaction(this.page);\n  deleteAccount = deleteAccount;\n  deleteNetwork = deleteNetwork(this.page);\n  getTokenBalance = getTokenBalance(this.page);\n  hasNetwork = hasNetwork(this.page);\n  importPK = importPK;\n  lock = lock(this.page);\n  sign = sign(this.page);\n  switchAccount = switchAccount(this.page);\n  switchNetwork = switchNetwork;\n  unlock = unlock(this.page);\n}\n","import Wallet from '../wallet';\nimport { Step, WalletIdOptions, WalletOptions } from '../wallets';\nimport {\n  addNetwork,\n  addToken,\n  approve,\n  confirmTransaction,\n  createAccount,\n  deleteAccount,\n  deleteNetwork,\n  getTokenBalance,\n  importPk,\n  lock,\n  sign,\n  switchAccount,\n  switchNetwork,\n  unlock,\n} from './actions';\nimport { allowNetworkSwitch as confirmNetworkSwitch } from './actions/allowNetworkSwitch';\nimport { hasNetwork } from './actions/hasNetwork';\nimport { setup } from './setup';\nimport downloader from './setup/downloader';\nimport { clearOnboardingHelp, closePopup, createPassword, importAccount, showTestNets } from './setup/setupActions';\n\nexport class MetaMaskWallet extends Wallet {\n  static id = 'metamask' as WalletIdOptions;\n  static recommendedVersion = '10.25.0';\n  static releasesUrl = 'https://api.github.com/repos/metamask/metamask-extension/releases';\n  static homePath = '/home.html';\n\n  options: WalletOptions;\n\n  // Extension Downloader\n  static download = downloader(this.id, this.releasesUrl, this.recommendedVersion);\n\n  // Setup\n  defaultSetupSteps: Step<WalletOptions>[] = [\n    importAccount,\n    createPassword,\n    clearOnboardingHelp,\n    closePopup,\n    showTestNets,\n  ];\n  setup = setup(this.page, this.defaultSetupSteps);\n\n  // Actions\n  addNetwork = addNetwork(this.page);\n  addToken = addToken(this.page);\n  approve = approve(this.page);\n  createAccount = createAccount(this.page);\n  confirmNetworkSwitch = confirmNetworkSwitch(this.page);\n  confirmTransaction = confirmTransaction(this.page);\n  deleteAccount = deleteAccount(this.page);\n  deleteNetwork = deleteNetwork(this.page);\n  getTokenBalance = getTokenBalance(this.page);\n  hasNetwork = hasNetwork(this.page);\n  importPK = importPk(this.page);\n  lock = lock(this.page);\n  sign = sign(this.page);\n  switchAccount = switchAccount(this.page);\n  switchNetwork = switchNetwork(this.page);\n  unlock = unlock(this.page);\n}\n","import { Page } from 'playwright-core';\nimport { clickOnButton } from '../../../helpers';\n\nimport { AddNetwork } from '../../../index';\nimport { clickOnLogo, getErrorMessage, openNetworkDropdown } from './helpers';\n\nexport const addNetwork =\n  (page: Page) =>\n  async ({ networkName, rpc, chainId, symbol }: AddNetwork): Promise<void> => {\n    await page.bringToFront();\n    await openNetworkDropdown(page);\n    await clickOnButton(page, 'Add network');\n\n    await page.getByTestId('network-display').click();\n    await page.getByRole('button', { name: 'Add network' }).click();\n    await page.getByTestId('add-network-manually').click();\n    await page.getByLabel('Network name').fill(networkName);\n    await page.getByLabel('New RPC URL').fill(rpc);\n    await page.getByLabel('Chain ID').fill(String(chainId));\n    await page.getByLabel('Currency symbol').fill(symbol);\n\n    const errorMessage = await getErrorMessage(page);\n    if (errorMessage) {\n      await clickOnLogo(page);\n      throw new SyntaxError(errorMessage);\n    }\n\n    await clickOnButton(page, 'Save');\n\n    await page.waitForSelector(`//*[text() = '${networkName}']`);\n\n    const gotItButtonVisible = await page.isVisible(`//button[contains(text(), 'Got it')]`);\n    if (gotItButtonVisible) await clickOnButton(page, 'Got it');\n  };\n","import { Page } from 'playwright-core';\nimport { clickOnButton, clickOnElement, getInputByLabel, typeOnInputField } from '../../../helpers';\nimport { AddToken } from '../../../types';\n\nexport const addToken =\n  (page: Page) =>\n  async ({ tokenAddress, symbol, decimals = 0 }: AddToken): Promise<void> => {\n    await page.bringToFront();\n\n    await clickOnElement(page, 'Import tokens');\n    await page.waitForTimeout(500);\n    await clickOnButton(page, 'Custom token');\n    await typeOnInputField(page, 'Token contract address', tokenAddress);\n\n    // TODO: handle case when contract is not containing symbol\n    // const symbolInput = await getInputByLabelSelector('Token symbol');\n\n    if (symbol) {\n      await typeOnInputField(page, 'Token symbol', symbol, true);\n    }\n\n    const decimalsInput = await getInputByLabel(page, 'Token decimal');\n    if (!(await decimalsInput.isDisabled())) await decimalsInput.type(String(decimals));\n\n    await clickOnButton(page, 'Add custom token');\n    await clickOnButton(page, 'Import tokens');\n  };\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton, waitForChromeState } from '../../../helpers';\nimport { performPopupAction } from './util';\n\nexport const approve = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup) => {\n    // Wait for popup to load\n    await popup.waitForLoadState();\n    await popup.bringToFront();\n\n    // Select first account\n    await popup.locator('input[type=\"checkbox\"]').first().check();\n\n    // Go through the prompts\n    await clickOnButton(popup, 'Next');\n    await clickOnButton(popup, 'Connect');\n\n    // Wait and close\n    await waitForChromeState(page);\n    await popup.close();\n  });\n};\n","import { Page } from 'playwright-core';\nimport { clickOnButton, clickOnElement, waitForChromeState } from '../../../helpers';\nimport { openProfileDropdown } from './helpers';\n\nexport const createAccount = (page: Page) => async (): Promise<void> => {\n  await page.bringToFront();\n  await openProfileDropdown(page);\n\n  // TODO: use different approach? maybe change param to account name\n  await clickOnElement(page, `Create account`);\n  await clickOnButton(page, `Create`);\n  await waitForChromeState(page);\n};\n","import { Page } from 'playwright-core';\nimport { clickOnButton, waitForChromeState } from '../../../helpers';\nimport { performPopupAction } from './util';\n\nexport const allowNetworkSwitch = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup) => {\n    await clickOnButton(popup, 'Switch network');\n    await waitForChromeState(page);\n  });\n};\n","import { Page } from 'playwright-core';\n\nimport { TransactionOptions } from '../../..';\nimport { performPopupAction } from './util';\n\nexport const confirmTransaction =\n  (page: Page) =>\n  async (options?: TransactionOptions): Promise<void> => {\n    await performPopupAction(page, async (popup) => {\n      if (options) {\n        await popup.getByTestId('edit-gas-fee-button').click();\n        await popup.getByTestId('edit-gas-fee-item-custom').click();\n\n        if (options.gas) {\n          await popup.getByTestId('base-fee-input').fill(String(options.gas));\n        }\n\n        if (options.priority) {\n          await popup.getByTestId('priority-fee-input').fill(String(options.priority));\n        }\n\n        if (options.gasLimit) {\n          await popup.getByTestId('advanced-gas-fee-edit').click();\n          await popup.getByTestId('gas-limit-input').fill(String(options.gasLimit));\n        }\n\n        await popup.getByRole('button', { name: 'Save' }).click();\n      }\n\n      await popup.getByTestId('page-container-footer-next').click();\n    });\n  };\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton, clickOnElement, waitForChromeState } from '../../../helpers';\nimport { openAccountDropdown } from './helpers';\nimport { switchAccount } from './switchAccount';\n\nexport const deleteAccount =\n  (page: Page) =>\n  async (accountNumber: number): Promise<void> => {\n    await page.bringToFront();\n\n    if (accountNumber === 1) throw new SyntaxError('Account 1 cannot be deleted');\n    await switchAccount(page)(accountNumber);\n\n    await openAccountDropdown(page);\n    await clickOnElement(page, 'Remove account');\n    await clickOnButton(page, 'Remove');\n    await waitForChromeState(page);\n  };\n","import { Page } from 'playwright-core';\nimport { clickOnButton, getElementByContent } from '../../../helpers';\nimport { clickOnLogo, openNetworkDropdown } from './helpers';\n\nexport const deleteNetwork =\n  (page: Page) =>\n  async (name: string): Promise<void> => {\n    await page.bringToFront();\n\n    await openNetworkDropdown(page);\n    const network = await getElementByContent(page, name);\n    await network.hover();\n\n    const deleteButton = await page.waitForSelector(`//*[contains(text(), '${name}')]/following-sibling::i`);\n    await deleteButton.click();\n\n    await clickOnButton(page, 'Delete');\n    await clickOnLogo(page);\n  };\n","import { Page } from 'playwright-core';\n\nexport const getTokenBalance =\n  (page: Page) =>\n  async (tokenSymbol: string): Promise<number> => {\n    await page.bringToFront();\n    await page.waitForTimeout(1000);\n\n    const assetListItems = await page.$$('.asset-list-item__token-button');\n\n    for (let index = 0; index < assetListItems.length; index++) {\n      const assetListItem = assetListItems[index];\n\n      const titleAttributeValue: string = await page.evaluate((item) => item.getAttribute('title'), assetListItem);\n\n      if (titleAttributeValue.split(' ')[1].toUpperCase() === tokenSymbol.toUpperCase()) {\n        const balance = titleAttributeValue.split(' ')[0];\n        return parseFloat(balance);\n      }\n    }\n\n    return 0;\n  };\n","import { Page } from 'playwright-core';\nimport { openNetworkDropdown } from './helpers';\n\nexport const hasNetwork =\n  (page: Page) =>\n  async (name: string): Promise<boolean> => {\n    await page.bringToFront();\n    await openNetworkDropdown(page);\n    const isNetworkListed = await page.isVisible(\n      `//div[@class=\"network-dropdown-list\"]/li[contains(string(), \"${name}\")]`,\n    );\n    (await page.waitForSelector('.network-display')).click();\n    return isNetworkListed;\n  };\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton, clickOnElement, typeOnInputField } from '../../../helpers';\nimport { getErrorMessage, openProfileDropdown } from './helpers';\n\nexport const importPk =\n  (page: Page) =>\n  async (privateKey: string): Promise<void> => {\n    await page.bringToFront();\n    await openProfileDropdown(page);\n\n    await clickOnElement(page, 'Import account');\n    await typeOnInputField(page, 'your private key', privateKey);\n    await clickOnButton(page, 'Import');\n\n    const errorMessage = await getErrorMessage(page);\n    if (errorMessage) throw new SyntaxError(errorMessage);\n  };\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton } from '../../../helpers';\nimport { openProfileDropdown } from './helpers';\n\nexport const lock = (page: Page) => async (): Promise<void> => {\n  await page.bringToFront();\n\n  await openProfileDropdown(page);\n  await clickOnButton(page, 'Lock');\n};\n","import { Page } from 'playwright-core';\n\nimport { clickOnButton } from '../../../helpers';\n\nimport { performPopupAction } from './util';\n\nexport const sign = (page: Page) => async (): Promise<void> => {\n  await performPopupAction(page, async (popup) => {\n    await popup.bringToFront();\n    await popup.reload();\n    await popup.waitForSelector(\"div\")\n    let selector = await popup.locator(\".signature-request-message__scroll-button\");\n    let count = await selector.count();\n    if(await selector.count() >=1){\n      await popup.click(\".signature-request-message__scroll-button\");\n    }\n    await clickOnButton(popup, 'Sign');\n  });\n};\n","import { Page } from 'playwright-core';\nimport { openNetworkDropdown } from './helpers';\n\nexport const switchNetwork =\n  (page: Page) =>\n  async (network = 'main'): Promise<void> => {\n    await page.bringToFront();\n    await openNetworkDropdown(page);\n    await page.waitForSelector(':nth-match(li.dropdown-menu-item, 2)');\n\n    const networkIndex = await page.evaluate((network) => {\n      const elements = document.querySelectorAll('li.dropdown-menu-item');\n      for (let i = 0; i < elements.length; i++) {\n        const element = elements[i];\n        if ((element as HTMLLIElement).innerText.toLowerCase().includes(network.toLowerCase())) {\n          return i;\n        }\n      }\n      return 0;\n    }, network);\n\n    const networkFullName = await page.evaluate((index) => {\n      const elements = document.querySelectorAll(`li.dropdown-menu-item > span`);\n      return (elements[index] as HTMLLIElement).innerText;\n    }, networkIndex);\n\n    const networkButton = (await page.$$('li.dropdown-menu-item'))[networkIndex];\n    await networkButton.click();\n\n    await page.waitForSelector(`//*[text() = '${networkFullName}']`);\n  };\n","import { Page } from 'playwright-core';\nimport { closePopup } from '../setup/setupActions';\n\nexport const unlock =\n  (page: Page) =>\n  async (password = 'password1234'): Promise<void> => {\n    await page.bringToFront();\n\n    await page.getByTestId('unlock-password').fill(password);\n    await page.getByTestId('unlock-submit').click();\n\n    await closePopup(page);\n  };\n","import { BrowserContext, Page } from 'playwright-core';\nimport { CoinbaseWallet } from './coinbase/coinbase';\nimport { MetaMaskWallet } from './metamask/metamask';\nimport { EXTENSION_ID } from './metamask/setup/downloader';\n\nexport type Step<Options> = (page: Page, options?: Options) => void;\nexport type WalletIdOptions = 'metamask' | 'coinbase';\nexport type WalletTypes = typeof CoinbaseWallet | typeof MetaMaskWallet;\nexport type WalletOptions = {\n  seed?: string;\n  password?: string;\n  showTestNets?: boolean;\n};\n\nexport const WALLETS: WalletTypes[] = [CoinbaseWallet, MetaMaskWallet];\n\nexport const getWalletType = (id: WalletIdOptions): WalletTypes => {\n  const walletType = WALLETS.find((wallet) => {\n    return wallet.id === id;\n  });\n\n  if (!walletType) throw new Error(`Wallet ${id} not supported`);\n\n  return walletType;\n};\n\nexport const getWallet = async (id: WalletIdOptions, browserContext: BrowserContext): Promise<MetaMaskWallet> => {\n  const wallet = getWalletType(id);\n\n  if (browserContext.pages().length === 1) {\n    let page: Page;\n    try {\n      // Wait for the wallet to pop up\n      page = await browserContext.waitForEvent('page', { timeout: 2000 });\n      return new wallet(page);\n    } catch {\n      // Open the wallet manually if tab doesn't pop up\n      page = await browserContext.newPage();\n      await page.goto(`chrome-extension://${EXTENSION_ID}${wallet.homePath}`);\n    }\n\n    return new wallet(page);\n  }\n\n  const page = browserContext.pages()[1];\n  return new wallet(page);\n};\n","import os from 'os';\nimport * as path from 'path';\nimport playwright from 'playwright-core';\n\nimport { DappwrightLaunchResponse, OfficialOptions } from './types';\nimport { getWallet, getWalletType } from './wallets/wallets';\n\n/**\n * Launch Playwright chromium instance with wallet plugin installed\n * */\nexport const sessionPath = path.resolve(os.tmpdir(), 'dappwright', 'session');\n\nexport async function launch(browserName: string, options: OfficialOptions): Promise<DappwrightLaunchResponse> {\n  const { headless, ...officialOptions } = options;\n  const wallet = getWalletType(officialOptions.wallet);\n  if (!wallet) throw new Error('Wallet not supported');\n\n  const extensionPath = await wallet.download(officialOptions);\n\n  const browserContext = await playwright.chromium.launchPersistentContext(\n    path.join(sessionPath, officialOptions.wallet),\n    {\n      headless: headless ?? false,\n      args: [`--disable-extensions-except=${extensionPath}`, `--load-extension=${extensionPath}`],\n    },\n  );\n\n  return {\n    wallet: await getWallet(wallet.id, browserContext),\n    browserContext,\n  };\n}\n","import fs from 'fs';\nimport * as path from 'path';\nimport { BrowserContext, Page } from 'playwright-core';\nimport { launch, sessionPath } from './launch';\nimport { Dappwright, OfficialOptions } from './types';\nimport { getWallet, WalletOptions } from './wallets/wallets';\n\nexport const bootstrap = async (\n  browserName: string,\n  { seed, password, showTestNets, ...launchOptions }: OfficialOptions & WalletOptions,\n): Promise<[Dappwright, Page, BrowserContext]> => {\n  if (fs.existsSync(path.join(sessionPath, launchOptions.wallet))) {\n  fs.rmdirSync(path.join(sessionPath, launchOptions.wallet), { recursive: true });\n  }\n  const { browserContext } = await launch(browserName, launchOptions);\n  try{\n    const wallet = await getWallet(launchOptions.wallet, browserContext);\n    await wallet.setup({ seed, password, showTestNets });  \n    return [wallet, wallet.page, browserContext];\n  } catch (e){\n    await browserContext.close();\n    throw e;\n  }\n\n};\n"],"names":["setup","page","defaultMetamaskSteps","async","options","steps","step","isNewerVersion","current","comparingWith","currentFragments","replace","split","comparingWithFragments","length","i","Number","isEmpty","path","fs","readdirSync","withFileTypes","filter","item","isFile","name","startsWith","downloader","walletId","releasesUrl","recommendedVersion","EXTENSION_PATH","version","console","log","warn","download","downloadDir","resolve","os","tmpdir","location","extractDestination","existsSync","filename","downloadUrl","getGithubRelease","rmdirSync","recursive","downloadedFile","downloadGithubRelease","zip","StreamZip","file","mkdirSync","extract","manifestPath","manifest","JSON","parse","readFileSync","key","writeFileSync","stringify","url","Promise","fileLocation","join","createWriteStream","stream","get","response","statusCode","headers","on","error","message","request","pipe","reject","process","env","GITHUB_TOKEN","body","chunk","data","result","draft","includes","tag_name","asset","assets","browser_download_url","tag","Wallet","constructor","this","static","waitForChromeState","waitForTimeout","clickOnElement","text","type","element","getElementByContent","click","clickOnButton","button","typeOnInputField","label","clear","excludeSpan","optional","input","getInputByLabel","e","evaluate","node","value","waitForSelector","timeout","clickOnSettingsSwitch","getSettingsSwitch","openNetworkDropdown","networkSwitcher","openProfileDropdown","accountSwitcher","noWaitAfter","force","clickOnLogo","header","getErrorMessage","errorElement","race","catch","innerText","performPopupAction","action","popup","context","waitForEvent","isClosed","switchAccount","accountNumber","bringToFront","showTestNets","metamaskPage","importAccount","seed","getByTestId","index","seedPart","entries","createPassword","password","fill","clearOnboardingHelp","closePopup","setTimeout","locator","isVisible","$eval","goHome","navigateHome","goto","getStarted","check","deleteAccount","_i","addToken","_","importPK","switchNetwork","confirmNetworkSwitch","CoinbaseWallet","id","defaultSetupSteps","addNetwork","settingsPage","newPage","errorNode","networkName","rpc","chainId","toString","symbol","errorMessage","textContent","close","SyntaxError","reload","approve","createAccount","confirmTransaction","deleteNetwork","getTokenBalance","tokenSymbol","readAttempts","readAttempt","currencyAmount","replaceAll","hasNetwork","networkIsListed","lock","sign","unlock","MetaMaskWallet","getByRole","getByLabel","String","tokenAddress","decimals","decimalsInput","isDisabled","waitForLoadState","first","gas","priority","gasLimit","accMenu","getAccountMenuButton","openAccountDropdown","network","hover","deleteButton","assetListItems","$$","assetListItem","titleAttributeValue","getAttribute","toUpperCase","balance","parseFloat","isNetworkListed","privateKey","importPk","selector","count","networkIndex","elements","document","querySelectorAll","toLowerCase","networkFullName","networkButton","WALLETS","getWalletType","walletType","find","wallet","Error","getWallet","browserContext","pages","homePath","sessionPath","launch","browserName","headless","officialOptions","extensionPath","playwright","chromium","launchPersistentContext","args","launchOptions"],"mappings":"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"}